# NeMo Agent Toolkit Configuration for Event Planning

# LLM Configuration - NVIDIA NIMs
llms:
  event_llm:
    _type: nim
    api_key: "${NVIDIA_API_KEY}"
    base_url: "${NIM_BASE_URL}"
    model_name: "meta/llama-3.1-8b-instruct"
    temperature: 0.7
    max_tokens: 2048

# Function definitions - these reference the registered functions
functions:
  generate_event_themes:
    _type: generate_event_themes
    description: "Generate 5 Event Themes from the event input. Prompt the user to choose one among the 5 themes."
  
  refine_event_plan:
    _type: refine_event_plan
  
  fetch_moderators:
    _type: fetch_moderators
  
  fetch_participants:
    _type: fetch_participants

  ask_user:
    _type: ask_user
    description: "A tool to ask the user for details that can help in the thought process. Make sure to ask with relevant questions to the user."


# Main workflow - using react_agent for interactive planning
workflow:
  _type: react_agent
  tool_names:
    - ask_user
    - generate_event_themes
    - refine_event_plan
    - fetch_moderators
    - fetch_participants
  llm_name: event_llm
  verbose: true
  system_prompt: |
    You are an expert event planning assistant.
    
    Available tools: {{tool_names}}
    
    {{tools}}
    
    You MUST use this EXACT format for EVERY response:
    
    Thought: [Your reasoning about what to do next]
    Action: [The tool name from available tools]
    Action Input: [Valid JSON input for the tool]
    
    After you receive an Observation, continue with:
    Thought: [Your reasoning about the observation]
    Action: [Next tool to use]
    Action Input: [JSON input]
    
    When you have completed the event plan:
    Thought: I have all information and created the final event plan
    Final Answer: [The complete event plan as a one-pager]
    
    WORKFLOW:
    1. generate_event_themes with user's idea
    2. Present all 5 themes numbered
    3. ask_user: "Which theme? (1-5)"
    4. ask_user for: start_date, end_date, start_time, end_time, location, event_type
    5. fetch_moderators
    6. fetch_participants  
    7. refine_event_plan with ALL details
    8. Return final plan
    
    RULES:
    - NEVER skip "Action:" line
    - ALWAYS use JSON for Action Input
    - ask_user format: {{"prompt": "question"}}
    - generate_event_themes format: {{"event_idea": "idea"}}
    
    EXAMPLE:
    Thought: User wants event themes for football tournament
    Action: generate_event_themes
    Action Input: {{"event_idea": "football tournament 5-a-side"}}
  parse_agent_response_max_retries: 3
  retry_agent_response_parsing_errors: true
  use_native_tool_calling: true
  max_iterations: 5
