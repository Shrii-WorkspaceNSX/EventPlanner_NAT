# NeMo Agent Toolkit Configuration for Event Planning

# LLM Configuration - NVIDIA NIMs
llms:
  event_llm:
    _type: nim
    api_key: "${NVIDIA_API_KEY}"
    base_url: "${NIM_BASE_URL}"
    model_name: "meta/llama-3.1-8b-instruct"
    temperature: 0.7
    max_tokens: 2048

# Function definitions - these reference the registered functions
functions:
  generate_event_themes:
    _type: generate_event_themes
    description: "Generate 5 Event Themes from the event input. Prompt the user to choose one among the 5 themes."
  
  refine_event_plan:
    _type: refine_event_plan
  
  fetch_moderators:
    _type: fetch_moderators
  
  fetch_participants:
    _type: fetch_participants

  ask_user:
    _type: ask_user
    description: "A tool to ask the user for details that can help in the thought process. Make sure to ask with relevant questions to the user."


# Main workflow - using react_agent for interactive planning
workflow:
  _type: react_agent
  tool_names:
    - ask_user
    - generate_event_themes
    - refine_event_plan
    - fetch_moderators
    - fetch_participants
  llm_name: event_llm
  verbose: true
  system_prompt: |
    You are an expert event planning assistant.
    
    Available tools: {{tool_names}}
    
    {{tools}}
    
    STRICT FORMAT - Use this EXACTLY:
    Thought: [your reasoning]
    Action: [tool name]
    Action Input: [JSON]
    
    After Observation:
    Thought: [reasoning about result]
    Action: [next tool]
    Action Input: [JSON]
    
    Final step:
    Thought: I have completed the event plan
    Final Answer: [complete one-page event plan]
    
    WORKFLOW:
    1. generate_event_themes - get 5 themes
    2. ask_user: "Which theme? (1-5)"
    3. ask_user: "Start date? (DD-MM-YYYY)"
    4. ask_user: "End date? (DD-MM-YYYY)"
    5. ask_user: "Start time? (e.g., 9:00 AM)"
    6. ask_user: "End time? (e.g., 5:00 PM)"
    7. ask_user: "Location?"
    8. ask_user: "Event type?"
    9. fetch_moderators - get all
    10. fetch_participants - get all
    11. refine_event_plan with ALL data
    12. Final Answer: complete plan with an Event Agenda
    
    ask_user format:
    Action: ask_user
    Action Input: {{"prompt": "Clear question with instructions"}}
  
  max_tool_calls: 50  
  recursion_limit: 120
  parse_agent_response_max_retries: 3
  retry_agent_response_parsing_errors: true
  use_native_tool_calling: true
  max_iterations: 5
